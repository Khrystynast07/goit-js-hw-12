{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '47393143-e8759780233395bfabd4940e8';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const fetchImages = async (query, page) => {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: 15,\n  });\n\n  const { data } = await axios.get(`${BASE_URL}?${params}`);\n  return data;\n};\n","import { list } from '../main';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.list-item a');\n\nexport function createMarkup(images) {\n  const markup = images\n    .map(\n      image =>\n        `<li class=\"list-item\">\n      <a href=\"${image.largeImageURL}\"><img src=\"${image.webformatURL}\" alt=\"${image.tags}\"></a>\n      <div class=\"info\">\n      <p>Likes<span>${image.likes}</span></p>\n    <p>Views<span>${image.views}</span></p>\n    <p>Comments<span>${image.comments}</span></p>\n    <p>Downloads<span>${image.downloads}</span></p>\n    </div>\n    </li>`\n    )\n    .join('');\n  list.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { fetchImages } from './js/pixabay-api';\nimport { createMarkup } from './js/render-functions';\n\nconst form = document.querySelector('.form-search');\nexport const list = document.querySelector('.image-list');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.button-to-load');\n\nlet query = '';\nlet page = 1;\n\nform.addEventListener('submit', getImages);\nloadMoreBtn.addEventListener('click', loadMore);\n\nasync function getImages(event) {\n  event.preventDefault();\n\n  const { search } = event.currentTarget.elements;\n  if (search.value.trim() === '') {\n    return iziToast.error({\n      position: 'topRight',\n      message: 'Please fill in the field',\n    });\n  }\n  list.innerHTML = '';\n  page = 1;\n  loadMoreBtn.classList.add('hidden');\n  loader.classList.remove('hidden');\n  query = search.value.trim();\n  try {\n    const data = await fetchImages(query, page);\n\n    if (data.hits.length === 0) {\n      return iziToast.info({\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n    createMarkup(data.hits);\n    form.reset();\n    if (data.hits.length === 15) {\n      loadMoreBtn.classList.remove('hidden');\n    }\n  } catch (error) {\n    iziToast.error({ position: 'topRight', message: error.message });\n  } finally {\n    loader.classList.add('hidden');\n  }\n}\n\nasync function loadMore() {\n  page += 1;\n  loader.classList.remove('hidden');\n\n  try {\n    const data = await fetchImages(query, page);\n    createMarkup(data.hits);\n\n    if (Math.ceil(data.totalHits / 15) === page) {\n      loadMoreBtn.classList.add('hidden');\n\n      iziToast.info({\n        position: 'topRight',\n        title: 'End of results',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n  } catch (error) {\n    iziToast.error({ position: 'topRight', message: error.message });\n  } finally {\n    loader.classList.add('hidden');\n  }\n}\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","params","data","axios","lightbox","SimpleLightbox","createMarkup","images","markup","image","list","form","loader","loadMoreBtn","getImages","loadMore","event","search","iziToast","error"],"mappings":"+vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEJC,EAAc,MAAOC,EAAOC,IAAS,CAChD,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKL,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACd,CAAG,EAEK,CAAE,KAAAE,CAAI,EAAK,MAAMC,EAAM,IAAI,GAAGN,CAAQ,IAAII,CAAM,EAAE,EACxD,OAAOC,CACT,ECdME,EAAW,IAAIC,EAAe,cAAc,EAE3C,SAASC,EAAaC,EAAQ,CACnC,MAAMC,EAASD,EACZ,IACCE,GACE;AAAA,iBACSA,EAAM,aAAa,eAAeA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,sBAEnEA,EAAM,KAAK;AAAA,oBACbA,EAAM,KAAK;AAAA,uBACRA,EAAM,QAAQ;AAAA,wBACbA,EAAM,SAAS;AAAA;AAAA,UAGlC,EACA,KAAK,EAAE,EACVC,EAAK,mBAAmB,YAAaF,CAAM,EAC3CJ,EAAS,QAAO,CAClB,CCjBA,MAAMO,EAAO,SAAS,cAAc,cAAc,EACrCD,EAAO,SAAS,cAAc,aAAa,EAClDE,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,iBAAiB,EAE5D,IAAId,EAAQ,GACRC,EAAO,EAEXW,EAAK,iBAAiB,SAAUG,CAAS,EACzCD,EAAY,iBAAiB,QAASE,CAAQ,EAE9C,eAAeD,EAAUE,EAAO,CAC9BA,EAAM,eAAc,EAEpB,KAAM,CAAE,OAAAC,CAAQ,EAAGD,EAAM,cAAc,SACvC,GAAIC,EAAO,MAAM,KAAI,IAAO,GAC1B,OAAOC,EAAS,MAAM,CACpB,SAAU,WACV,QAAS,0BACf,CAAK,EAEHR,EAAK,UAAY,GACjBV,EAAO,EACPa,EAAY,UAAU,IAAI,QAAQ,EAClCD,EAAO,UAAU,OAAO,QAAQ,EAChCb,EAAQkB,EAAO,MAAM,OACrB,GAAI,CACF,MAAMf,EAAO,MAAMJ,EAAYC,EAAOC,CAAI,EAE1C,GAAIE,EAAK,KAAK,SAAW,EACvB,OAAOgB,EAAS,KAAK,CACnB,SAAU,WACV,QACE,0EACV,CAAO,EAEHZ,EAAaJ,EAAK,IAAI,EACtBS,EAAK,MAAK,EACNT,EAAK,KAAK,SAAW,IACvBW,EAAY,UAAU,OAAO,QAAQ,CAExC,OAAQM,EAAO,CACdD,EAAS,MAAM,CAAE,SAAU,WAAY,QAASC,EAAM,OAAO,CAAE,CACnE,QAAY,CACRP,EAAO,UAAU,IAAI,QAAQ,CAC9B,CACH,CAEA,eAAeG,GAAW,CACxBf,GAAQ,EACRY,EAAO,UAAU,OAAO,QAAQ,EAEhC,GAAI,CACF,MAAMV,EAAO,MAAMJ,EAAYC,EAAOC,CAAI,EAC1CM,EAAaJ,EAAK,IAAI,EAElB,KAAK,KAAKA,EAAK,UAAY,EAAE,IAAMF,IACrCa,EAAY,UAAU,IAAI,QAAQ,EAElCK,EAAS,KAAK,CACZ,SAAU,WACV,MAAO,iBACP,QAAS,4DACjB,CAAO,EAEJ,OAAQC,EAAO,CACdD,EAAS,MAAM,CAAE,SAAU,WAAY,QAASC,EAAM,OAAO,CAAE,CACnE,QAAY,CACRP,EAAO,UAAU,IAAI,QAAQ,CAC9B,CACH"}